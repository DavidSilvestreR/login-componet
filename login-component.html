<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-button/paper-button.html">

<dom-module id="login-component">
    <template>
        <style>
            :host {
                display: block;
            }

        </style>
        <div class="login" hidden$="{{!toggle}}">
            <h2>Iniciar sesión</h2>
            <p>¿No tienes cuenta? Da clic
                <paper-button on-tap="toggleContainer">aquí</paper-button>
                <paper-input label="Nombre de usuario" value="{{username}}"></paper-input>
                <paper-input label="Contraseña" type="password" value="{{password}}"></paper-input>
                <paper-button on-tap="login">Iniciar sesión</paper-button>
        </div>
        <div class="signin" hidden$="{{toggle}}">
            <h2>Iniciar sesión</h2>
            <p>Ya tienes cuenta Inicia sesión
                <paper-button on-tap="toggleContainer">aquí</paper-button>
                <paper-input label="Nombre de usuario" value="{{username}}"></paper-input>
                <paper-input label="Correo" type="email" value="{{mail}}"></paper-input>
                <paper-input label="Contraseña" type="password" value="{{password}}"></paper-input>
                <paper-input label="Confirma Contraseña" type="password" value="{{passwordConfirm}}"></paper-input>

                <paper-button on-tap="register">Registrar Usuario</paper-button>
        </div>
    </template>

    <script>
        /**
         * `login-component`
         * this is the first elemetn create whit polymer
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */
        class LoginComponent extends Polymer.Element {
            static get is() {
                return 'login-component';
            }

            static get properties() {
                return {
                    username: {
                        type: String,
                        value: ''
                    },
                    password: {
                        type: String,
                        value: ''
                    },
                    passwordConfirm: {
                        type: String,
                        value: ''
                    },
                    mail: {
                        type: String,
                        value: ''
                    },
                    toggle: {
                        type: Boolean,
                        value: true
                    }

                };
            }

            //this function simulates the login of a user, the function compares hard-coding data, if username and password match with hard-			coding data, the function return true
            static userAuthentication(username, password) {
                return username === "DavidSilvestre" && password === "polymer";
            }

            //This function compares two passwords and returns true if the passwords are the same or false if the passwords are different
            static comparePasswords(pasworone, passwordtwo) {
                return pasworone === passwordtwo;
            }

            //this is an event, which is executed by clicking the "Iniciar sesión" button
            login() {
                if (!LoginComponent.userAuthentication(this.username, this.password)) {
                    alert("El usuario inicio sesión");
                } else {
                    alert("Usuario o Contraseña incorrecta");
                }
            }

            //this is an event, which is executed by clicking the "Registrar usuario" button
            register() {
                if (LoginComponent.comparePasswords(this.password, this.passwordConfirm)) {
                    alert("Usuario Registrado");
                } else {
                    alert("Las contraseñas no coiciden");
                }
            }

            toggleContainer() {
                this.toggle = !this.toggle;
            }
        }

        window.customElements.define(LoginComponent.is, LoginComponent);
    </script>
</dom-module>
